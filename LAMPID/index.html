<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pelaporan LAMPID Desa Panyocokan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div id="app">
        <!-- Halaman Login -->
        <div v-if="!isLoggedIn" class="login-container">
            <div class="login-card">
                <img src="assets/img/logo.png" alt="Logo Desa" class="logo">
                <h2 class="text-center mb-4">Login Pelaporan LAMPID</h2>
                <form @submit.prevent="login">
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" v-model="username" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" v-model="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Login</button>
                </form>
                <div class="mt-3 text-center">
                    <button class="btn btn-link" @click="showForgotPassword = true">Lupa Password</button>
                    <button class="btn btn-link" @click="showRegister = true">Daftar</button>
                </div>
            </div>
        </div>

        <!-- Modal Lupa Password -->
        <div v-if="showForgotPassword" class="modal-overlay" @click="showForgotPassword = false">
            <div class="modal-content" @click.stop>
                <h5>Lupa Password</h5>
                <p>Masukkan email Anda untuk reset password.</p>
                <input type="email" class="form-control mb-3" placeholder="Email">
                <button class="btn btn-primary">Kirim</button>
                <button class="btn btn-secondary ms-2" @click="showForgotPassword = false">Tutup</button>
            </div>
        </div>

        <!-- Modal Daftar -->
        <div v-if="showRegister" class="modal-overlay" @click="showRegister = false">
            <div class="modal-content" @click.stop>
                <h5>Daftar Akun Baru</h5>
                <p>Fitur pendaftaran sedang dalam pengembangan. Hubungi admin desa.</p>
                <button class="btn btn-secondary" @click="showRegister = false">Tutup</button>
            </div>
        </div>

        <!-- Halaman Utama Setelah Login -->
<div v-if="isLoggedIn" class="main-container">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <button class="btn btn-outline-light" @click="logout">Logout</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container mt-4">
        <!-- Bagian Logo dan Selamat Datang -->
        <div class="welcome-section">
            <img src="assets/img/logo.png" alt="Logo Desa" class="welcome-logo">
            <h4>Selamat Datang di Sistem Pelaporan LAMPID Desa Panyocokan</h4>
            <p>Pilih menu di bawah untuk mengakses formulir pelaporan.</p>
        </div>
        <!-- Grid Menu -->
        <div class="menu-grid">
            <div class="menu-card" @click="openForm('kelahiran')">
                <img src="assets/img/lahir.jpeg" alt="Kelahiran" class="menu-icon">
                <h5>Kelahiran</h5>
                <p>Laporan kelahiran penduduk desa</p>
            </div>
            <div class="menu-card" @click="openForm('kematian')">
                <img src="assets/img/mati.jpeg" alt="Kematian" class="menu-icon">
                <h5>Kematian</h5>
                <p>Laporan kematian penduduk desa</p>
            </div>
            <div class="menu-card" @click="openForm('kepindahan')">
                <img src="assets/img/pindah.jpeg" alt="Kepindahan" class="menu-icon">
                <h5>Kepindahan</h5>
                <p>Laporan kepindahan penduduk</p>
            </div>
            <div class="menu-card" @click="openForm('kedatangan')">
                <img src="assets/img/datang.jpeg" alt="Kedatangan" class="menu-icon">
                <h5>Kedatangan</h5>
                <p>Laporan kedatangan penduduk</p>
            </div>
            <div class="menu-card" @click="openForm('rekaplampid')">
                <img src="assets/img/rekap.jpeg" alt="Rekap LAMPID" class="menu-icon">
                <h5>Rekap LAMPID</h5>
                <p>Rekapitulasi data LAMPID</p>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/datauser.js"></script>
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    username: '',
                    password: '',
                    isLoggedIn: false,
                    showForgotPassword: false,
                    showRegister: false,
                    currentTemplate: null,
                    users: window.users // Dari datauser.js
                };
            },
            methods: {
                login() {
                    const user = this.users.find(u => u.username === this.username && u.password === this.password);
                    if (user) {
                        this.isLoggedIn = true;
                        this.currentTemplate = 'kelahiran'; // Default
                    } else {
                        alert('Username/password yang Anda masukkan salah');
                    }
                },
                logout() {
                    this.isLoggedIn = false;
                    this.username = '';
                    this.password = '';
                    this.currentTemplate = null;
                },
                openForm(template) {
                    const urls = {
                        kelahiran: 'https://docs.google.com/forms/d/e/1FAIpQLScatMLZdIhL-0ov5tjqqIr4s-1qAlNCFhZW4ulMfrmwHVlIww/viewform?usp=header',
                        kematian: 'https://forms.gle/bUj12kPZ8x6jUbhaA',
                        kepindahan: 'https://forms.gle/gBTUyyuv7vu4MPJV6',
                        kedatangan: 'https://forms.gle/7MXxcLDP9vXC9K3Z8',
                        rekaplampid: 'https://forms.gle/2x2xSigCXGQFtXTC8'
                    };
                    window.open(urls[template], '_blank'); // Buka di tab baru
                }
            }
        }).mount('#app');
    </script>
</body>
</html>